<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link
      rel="icon"
      href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text x=%2250%%22 y=%2250%%22 style=%22dominant-baseline:central;text-anchor:middle;font-size:90px;%22>‚ù§Ô∏è‚Äçüî•</text></svg>"
    >
    <title>lifespan</title>
    <style>
    :root {
      font-family: sans-serif;
    }
    body {
      display: flex;
      flex-direction: column;
      align-items: center;
    }
    </style>
  </head>
  <body>
    <h1>lifespan</h1>
    <form onsubmit="return false">
      <label for="birthday">Birthday:</label>
      <input
        type="date"
        id="birthday"
        name="birthday"
        value="2000-01-01"
        min="1900-01-01"
      >
    </form>

    <nav>
      <button id="hours-button" type="button">hours</button>
      <button id="days-button" type="button">days</button>
      <button id="weeks-button" type="button">weeks</button>
      <button id="months-button" type="button">months</button>
    </nav>

    <h2>Your available time</h2>
    <form onsubmit="return false">
      <div>
        <label for="sleep-time">Sleep time par day:</label>
        <input
          type="number"
          id="sleep-time"
          name="sleep-time"
          value="8"
          min="0"
          max="24"
        >
      </div>

      <div>
        <label for="waste-time">Waste time par day:</label>
        <input
          type="number"
          id="waste-time"
          name="waste-time"
          value="2"
          min="0"
          max="24"
        >
      </div>

      <div>
        <label for="work-time">Work time par week:</label>
        <input
          type="number"
          id="work-time"
          name="work-time"
          value="40"
          min="0"
          max="168"
        >
      </div>

      <button id="visualize-available-time-button" type="button">
        visualize available time
      </button>
    </form>

    <script>
    const MAX_AGE = 90
    const today = new Date()
    const minYear = today.getFullYear() - MAX_AGE
    const birthdaySelect = document.getElementById("birthday")
    birthdaySelect.min = `${minYear}-01-01`

    // visualize your lifespan
    const navigate = (path) => (e) => {
      e.preventDefault()
      const birthday = birthdaySelect.value
      const birthdayDate = new Date(birthday)
      const year = birthdayDate.getFullYear()
      const month = birthdayDate.getMonth() + 1
      const day = birthdayDate.getDate()
      window.location.href = `${path}.html?year=${year}&month=${month}&day=${day}`
    }

    const hoursButton = document.getElementById("hours-button")
    const daysButton = document.getElementById("days-button")
    const weeksButton = document.getElementById("weeks-button")
    const monthsButton = document.getElementById("months-button")

    hoursButton.addEventListener("click", navigate("hour"))
    daysButton.addEventListener("click", navigate("day"))
    weeksButton.addEventListener("click", navigate("week"))
    monthsButton.addEventListener("click", navigate("month"))

    // visualize your available time
    const visualizeAvailableTime = (e) => {
      e.preventDefault()
      const birthday = birthdaySelect.value
      const birthdayDate = new Date(birthday)
      const year = birthdayDate.getFullYear()
      const month = birthdayDate.getMonth() + 1
      const day = birthdayDate.getDate()
      const sleepTime = document.getElementById("sleep-time").value
      const wasteTime = document.getElementById("waste-time").value
      const workTime = document.getElementById("work-time").value
      window.location.href = `available.html?year=${year}&month=${month}&day=${day}&sleepTime=${sleepTime}&wasteTime=${wasteTime}&workTime=${workTime}`
    }

    document
      .getElementById("visualize-available-time-button")
      .addEventListener("click", visualizeAvailableTime)
    </script>
  </body>
</html>
