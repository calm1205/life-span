<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link
      rel="icon"
      href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text x=%2250%%22 y=%2250%%22 style=%22dominant-baseline:central;text-anchor:middle;font-size:90px;%22>â¤ï¸â€ğŸ”¥</text></svg>"
    >
    <title>lifespan</title>
    <style>
    body {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      gap: 10px;
    }
    </style>
  </head>
  <body>
    <p>input your birth date</p>
    <input type="date" id="birthday" name="birthday">
    <form onsubmit="return false">
      <select name="year" id="year"></select>
      <select name="month" id="month" value="1">
        <option value="1">1</option>
        <option value="2">2</option>
        <option value="3">3</option>
        <option value="4">4</option>
        <option value="5">5</option>
        <option value="6">6</option>
        <option value="7">7</option>
        <option value="8">8</option>
        <option value="9">9</option>
        <option value="10">10</option>
        <option value="11">11</option>
        <option value="12">12</option>
      </select>
      <select name="day" id="day" value="1">
        <option value="1">1</option>
        <option value="2">2</option>
        <option value="3">3</option>
        <option value="4">4</option>
        <option value="5">5</option>
        <option value="6">6</option>
        <option value="7">7</option>
        <option value="8">8</option>
        <option value="9">9</option>
        <option value="10">10</option>
        <option value="11">11</option>
        <option value="12">12</option>
        <option value="13">13</option>
        <option value="14">14</option>
        <option value="15">15</option>
        <option value="16">16</option>
        <option value="17">17</option>
        <option value="18">18</option>
        <option value="19">19</option>
        <option value="20">20</option>
        <option value="21">21</option>
        <option value="22">22</option>
        <option value="23">23</option>
        <option value="24">24</option>
        <option value="25">25</option>
        <option value="26">26</option>
        <option value="27">27</option>
        <option value="28">28</option>
        <option value="29">29</option>
        <option value="30">30</option>
        <option value="31">31</option>
      </select>
    </form>
    <div>
      <button id="hours-button" type="button">hours</button>
      <button id="days-button" type="button">days</button>
      <button id="weeks-button" type="button">weeks</button>
      <button id="months-button" type="button">months</button>
    </div>

    <script type="module">
    import { yearRange } from "./js/yearRange.js"

    const yearSelect = document.getElementById("year")
    const monthSelect = document.getElementById("month")
    const daySelect = document.getElementById("day")

    // yearã®é¸æŠè‚¢ã‚’ç”Ÿæˆ
    yearSelect.innerHTML = yearRange()
      .map((year) => `<option value="${year}">${year}</option>`)
      .join("")

    // åˆæœŸè¡¨ç¤ºæ™‚ã®å¹´ã¯ 2000 å¹´ã‚’ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã«ã™ã‚‹ï¼ˆç¯„å›²å¤–ãªã‚‰ç¾åœ¨å¹´ï¼‰
    const DEFAULT_YEAR = 2000
    const now = new Date()
    const currentYear = now.getFullYear()
    if (DEFAULT_YEAR <= currentYear && DEFAULT_YEAR >= currentYear - 100) {
      yearSelect.value = DEFAULT_YEAR
    } else {
      yearSelect.value = currentYear
    }

    const navigate = (path) => (e) => {
      e.preventDefault()
      const year = yearSelect.value
      const month = monthSelect.value
      const day = daySelect.value
      window.location.href = `${path}.html?year=${year}&month=${month}&day=${day}`
    }

    const hoursButton = document.getElementById("hours-button")
    const daysButton = document.getElementById("days-button")
    const weeksButton = document.getElementById("weeks-button")
    const monthsButton = document.getElementById("months-button")

    hoursButton.addEventListener("click", navigate("hour"))
    daysButton.addEventListener("click", navigate("day"))
    weeksButton.addEventListener("click", navigate("week"))
    monthsButton.addEventListener("click", navigate("month"))
    </script>
  </body>
</html>
